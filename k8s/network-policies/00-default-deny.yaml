# Default Network Policy - Simple Setup
# ======================================
# - Allow ALL traffic within the namespace (pods can talk freely)
# - Allow traffic from Ingress controller (for external HTTP access)
# - Block direct external access that bypasses Ingress
#
# This is less restrictive but much simpler to understand!

apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: default-allow-internal
  namespace: grading-system
spec:
  podSelector: {}  # Apply to all pods
  policyTypes:
  - Ingress
  - Egress
  ingress:
  # Allow ALL traffic from within the namespace
  - from:
    - podSelector: {}
  # Allow traffic from ingress-nginx (external HTTP via Ingress resource)
  - from:
    - namespaceSelector:
        matchLabels:
          kubernetes.io/metadata.name: ingress-nginx
  egress:
  # Allow ALL traffic to within the namespace
  - to:
    - podSelector: {}
